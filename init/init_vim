#!/usr/bin/env bash

# Prep the .vim dir and install Pathogen:
if [[ ! -f ~/.vim/autoload/pathogen.vim ]]; then
    mkdir -p ~/.vim ~/.vim/autoload ~/.vim/bundle
    curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim
fi

# Clone vim bundles:
#   Solarized, Fugitive, NERD TREE, Syntastic, Surround, CTRLP, NERD Commenter
pushd ~/.vim/bundle
    git init
    git add .
    git commit -m "First commit"

    response_one=""
    response_two=""
    finished=false
    while [[ finished=false ]]; do
        echo "Enter your GitHub username:" 1>&2
        read -r response_one
        echo "You entered $response_one. Is this correct? [y/n]" 1>&2
        read -sn 1 response_two
        response_two=${response_two:-y}
        if [[ "$response_tw0" =~ [Yy] ]]; then
            finished=true
        fi
    done

    # Set the remote URL for the vim-bundles repo:
    git remote set-url origin "git@github.com:$response_one/vim-bundles.git"

    git submodule add git://github.com/altercation/vim-colors-solarized.git
    git submodule add git://github.com/tpope/vim-fugitive.git
    vim -u NONE -c "helptags vim-fugitive/doc" -c q
    git submodule add git://github.com/scrooloose/nerdtree.git
    git submodule add git://github.com/scrooloose/syntastic.git
    git submodule add git://github.com/tpope/vim-surround.git
    git submodule add git://github.com/kien/ctrlp.vim.git
    git submodule add git://github.com/scrooloose/nerdcommenter.git
    git submodule add git://github.com/airblade/vim-gitgutter.git
    git submodule add git://github.com/pangloss/vim-javascript.git
    git submodule add git://github.com/tpope/vim-rails.git
    git submodule add git://github.com/tpope/vim-bundler.git
    git submodule add git://github.com/mattn/emmet-vim.git
    git submodule add git://github.com/godlygeek/tabular.git
    git submodule add git://github.com:ervandew/supertab.git
popd